project(xr_3da)

set(SRC_FILES
    "AccessibilityShortcuts.hpp"
    "entry_point.cpp"
    "resource.h"
    "stdafx.h"
    "stdafx.cpp"
)

group_sources(SRC_FILES)

add_executable(${PROJECT_NAME} ${SRC_FILES})

target_include_directories(${PROJECT_NAME}
    PRIVATE
    ${CMAKE_SOURCE_DIR}/src
    ${SDL_INCLUDE_DIRS}
)

target_link_libraries(${PROJECT_NAME}
    PRIVATE
    xrCore
    xrAPI
    xrEngine
)

if (NINTENDO_SWITCH)
# Linked statically
target_link_libraries(${PROJECT_NAME}
    PRIVATE
    xrAICore
    xrGame
    xrParticles
    xrRender_GL
    xrPhysics
    xrSound
    xrUICore
)

# Generates Switch specific binary
nx_create_nro(${PROJECT_NAME})
endif()

set_target_properties(${PROJECT_NAME} PROPERTIES PREFIX "")

install(TARGETS ${PROJECT_NAME} RUNTIME
    DESTINATION ${CMAKE_INSTALL_BINDIR}
    PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
)
